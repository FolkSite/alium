Описание
========

Система Alium - набор скриптов, обслуживающий рутинные операции магазина Мерчиум.

Она предназначена для:
1. Отслеживания изменения цен и наличия товара
2. Обновления цен по заложенным бизнес-правилам
3. (Добавления товаров в Мерчиум)

Системные требования
====================

PHP 5.3+
MongoDB 2+
(MySQL 5.2+)

Составные части
===============

Мерчиум
Алиум
Алиэкспресс (или другой магазин)



Установка и настройка
=====================

(Переименовать файл etc/config.dist.php в config.php и настроить)

Создать проект по примеру projects/example.json

`name` - имя проекта

`uri` - URI проекта

`mongo.db` - название БД проекта

`mongo.collection` - название коллекции проекта

`price.closure` - замыкание, рассчитывающее цену

`price.round` - округлять цену?

`price.sweet` - уменьшать цену на рубль (работает при округлении цены)?

Создать уникальный индекс по `id`:

        use dbname;
        db.collection.ensureIndex({id: 1}, {unique: true});


Порядок работы
==============

Заполнение БД Алиума
--------------------

Файл `1-fill-alium.php`

Применяется к CSV-выгрузке Мерчиума. Обновляет данные Алиума и загружает недостающие товары.

Обновление БД Алиума
--------------------

Файл `2-update-alium.php`

Запускается и автоматически обновляет данные магазина из интернет-магазина (Алиэкспресс).


Обновление магазина Мерчиум
---------------------------

Файл `3-export-merchium.php`

Экспорт в CSV необходимых данных